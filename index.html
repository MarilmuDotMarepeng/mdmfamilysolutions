<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Family Technology</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="surfe.pro" content="112a77c34a500ec23e91610665127fd6">
  <meta name="description" content="Website PTC Mini App, Family Technology">
  <link rel="icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgUmv7cwPmzjoThvUQwEmxaL0cd2SFdE4FBIZ7wVQjz1qjOrQpJHbYy_rOJSS6uTrTKeBykfmsINPFi6TqCAYEzCLzHUYj12ffbLET7_lkrLE6bLXy_NrRY5GmIEEXH5HBpbYhPcIiab8cuNitEJTaRjw1iNhWbDh0sLzuF1a3eubCt1ASIxoQJkodaMZc/w150-h150-p-k-no-nu-rw-e90/Marilmu%20Dot%20Marepeng.png" type="image/png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: 'Roboto', sans-serif;
      background-color: #f2f4f7;
      color: #333;
    }

    /* Login Popup Fullscreen */
    #loginPopup {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      flex-direction: column;
    }

    .login-box {
      width: 90%;
      max-width: 360px;
      background: #ffffff;
      padding: 24px;
      border-radius: 14px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .login-box h3 {
      text-align: left;
      font-size: 22px;
      margin-bottom: 20px;
      color: #222;
      font-weight: bold;
    }

    .login-box input {
      width: 100%;
      padding: 12px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    .login-box input:focus {
      border-color: #34b7f1;
      outline: none;
      box-shadow: 0 0 5px rgba(52, 183, 241, 0.4);
    }

    .login-box button {
      width: 100%;
      padding: 14px;
      background: #34b7f1;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .login-box button:hover {
      background: #0088cc;
    }

    #loginError {
      color: #e74c3c;
      font-size: 14px;
      margin-bottom: 10px;
    }
    
.main-content {
  padding-top: 80px;
  padding-bottom: 120px;
}

/* Header Ad */
.header-ad {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 77px;
  backdrop-filter: blur(7px);
  background-color: #0088cc;
  padding: 0 17px;
  z-index: 1000;
  box-shadow: 0 2px 7px rgba(0, 0, 0, 0.08);
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Profile Icon (Left) */
.header-ad .profile-icon {
  width: 47px;
  height: 47px;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.99);
  display: flex;
  justify-content: center;
  align-items: center;
  color: #34b7f1;
  font-weight: bold;
  font-size: 20px;
}

/* Branding Text (Right) */
.header-ad .brand-text {
  font-size: 24px;
  font-weight: bold;
  color: rgba(255, 255, 255, 0.99);
}

/* Footer Ad */
.footer-ad {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 3px;
  backdrop-filter: blur(6px);
  background-color: #0088cc;
  z-index: 1000;
  box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.08);
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  text-align: center;
}

  .status-card {
  width: 100%;
  max-width: 100%;
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  padding: 16px;
  margin-top: 20px;
  font-family: 'Segoe UI', sans-serif;
}

.status-row {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  font-size: 15px;
  color: #333;
  border-bottom: 1px solid #f0f0f0;
}

.status-row:last-child {
  border-bottom: none;
}

    #userInfoWrapper {
      text-align: center;
      padding: 16px 12px;
    }

    #userInfoWrapper strong {
      font-size: 30px;
      display: block;
      margin-bottom: 6px;
      color: #222;
    }

    #userInfo {
      font-size: 14px;
      color: #555;
    }

    #adsContainer {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      padding: 16px;
    }

    .ad-box {
      background: #fff;
      border-radius: 10px;
      padding: 16px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
      text-align: center;
      transition: transform 0.3s ease;
    }

    .ad-box:hover {
      transform: scale(1.03);
    }

    .btn {
      margin-top: 12px;
      padding: 12px;
      width: 100%;
      background: #0088cc;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn:disabled {
      background: #bbb;
      cursor: not-allowed;
    }

    .info {
      margin-top: 6px;
      font-size: 13px;
      color: #666;
    }

    .logout {
      display: block;
      margin: 15px auto;
      padding: 12px 24px;
      background: #e74c3c;
      color: white;
      width: 90%;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .logout:hover {
      background: #c0392b;
    }

    #loading {
      display: none;
      background: #fff3cd;
      color: #856404;
      text-align: center;
      padding: 12px;
      font-size: 14px;
    }
    
@media screen and (min-width: 500px) {
      #adsContainer {
        grid-template-columns: repeat(2, 1fr);
      }
    }

@media screen and (min-width: 768px) {
      #adsContainer {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
/* Container for the ad iframe */
#ad-frame-container {
  width: 100%;
  max-width: 728px;
  margin: 0 auto;
  position: relative;
  background: linear-gradient(to right, #f9f9f9, #ffffff);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
  border-radius: 1px;
  overflow: hidden;
  padding: 1px;
  text-align: center;
  box-sizing: border-box;
}

/* Iframe styling */
#ad-frame-container iframe {
  width: 100%;
  height: 90px;
  border: none;
  background-color: transparent;
  display: block;
}

/* Advertise Here Link */
.ad-link {
  position: absolute;
  bottom: 8px;
  right: 12px;
  font-size: 13px;
  color: #ffffff;
  background-color: #34b7f1;
  padding: 6px 14px;
  border-radius: 20px;
  text-decoration: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  transition: background-color 0.3s ease, color 0.3s ease;
}

.ad-link:hover {
  background-color: #0088cc;
  color: #ffffff;
}

.ad-link:active {
  background-color: #007bb5;
}
  </style>
</head>
<body>
<!-- LOGIN POPUP -->
<div id="loginPopup">
<script src="//static.surfe.pro/js/net.js"></script>
<ins class="surfe-be" data-sid="412112"></ins>
<script>(adsurfebe = window.adsurfebe || []).push({});</script>
  
  <div class="login-box">
    <h3>ðŸ’¯</h3>
    <input type="text" id="username" placeholder="Nama">
    <input type="password" id="password" placeholder="Pasword">
    <div id="loginError"></div>
    <button onclick="login()">Masuk</button>
  </div>
</div>

<!-- Header Ad Section -->
<div class="header-ad">
  <div class="profile-icon">M</div>
  <div class="brand-text">MDM SOLUTIONS</div>
</div>

<!-- KONTEN UTAMA -->
<div class="main-content">
<div id="statusBar">Status: Ready!</div>

<div id="userInfoWrapper">
  <strong id="displayName">Admin</strong>
  <span id="userInfo">Selamat datang!</span>
</div>

<button class="logout" onclick="logout()">Logout</button>


<div id="withdrawContainer">
<button class="logout" id="withdrawButton" onclick="showWithdrawForm()">Withdraw</button>
<div id="withdrawForm" style="display:none;">
<label for="faucetpayEmail" style="display:block; font-weight:600; margin-bottom:6px; font-size:14px; color:#2c3e50;">
  Email FaucetPay:
</label><input type="email" id="faucetpayEmail" placeholder="Masukkan email FaucetPay" required
  style="width:100%; padding:10px 14px; border:1px solid #ccc; border-radius:10px; font-size:14px; 
         box-shadow:inset 0 1px 2px rgba(0,0,0,0.05); transition:all 0.2s ease-in-out;"
  onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 0 3px rgba(52,152,219,0.2)';"
  onblur="this.style.borderColor='#ccc'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.05)';"
/>
        <button class="logout" onclick="handleWithdraw()">Submit</button>
    </div>
</div>

<div id="loading">Memuat iklan...</div>

<div id="adsContainer">
  <!-- Iklan akan diisi via JS -->
</div>
</div>

<!-- Footer Ad Section -->
<div class="footer-ad">
  <div id="ad-frame-container">
    <script src="//static.surfe.pro/js/net.js"></script>
<ins class="surfe-be" data-sid="412112"></ins>
<script>(adsurfebe = window.adsurfebe || []).push({});</script>
  </div>
</div>


<script>
  const USERS = [
    { name: "Hamidah Nur", password: "Hamidah Nur", adUrl: "ads_hamidah.html", isAdmin: true },
    { name: "Meirina Yustika", password: "Meirina Yustika", adUrl: "ads_meirina.html", isAdmin: true },
    { name: "Fitri Nur Hayati", password: "Fitri Nur Hayati", adUrl: "ads_fitrinur.html", isAdmin: true },
    { name: "Julya Amanda", password: "Julya Amanda", adUrl: "ads_julya.html", isAdmin: true },
    { name: "Ahmad Ismail Al Malik", password: "Ahmad Ismail Al Malik", adUrl: "ads_ahdismail.html", isAdmin: true },
    { name: "User", password: "user", adUrl: "", isAdmin: false }
];

  const MAX_PER_AD = 1000;
  const CLICK_INTERVAL = 10 * 1000;
  const RESET_TIME = 24 * 60 * 60 * 1000;
  const POINTS_PER_CLICK = 10;

  function login() {
    const uname = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();
    const user = USERS.find(u => u.name === uname && u.password === pass);

    if (user) {
      localStorage.setItem('ptc_user', user.name);
      localStorage.setItem('ptc_adUrl', user.adUrl);
      localStorage.setItem('ptc_clickmap', JSON.stringify({}));
      localStorage.setItem('ptc_lastclick', '0');
      localStorage.setItem('ptc_lastreset', Date.now());
      localStorage.setItem('ptc_points', '0');
      document.getElementById('loginPopup').style.display = 'none';
      renderDashboard();
    } else {
      document.getElementById('loginError').textContent = 'Username atau Password salah.';
    }
  }

  function logout() {
    localStorage.clear();
    location.reload();
  }

  function resetClicksIfNeeded() {
    const lastReset = parseInt(localStorage.getItem('ptc_lastreset') || '0');
    if (Date.now() - lastReset > RESET_TIME) {
      localStorage.setItem('ptc_clickmap', JSON.stringify({}));
      localStorage.setItem('ptc_points', '0');
      localStorage.setItem('ptc_lastreset', Date.now());
    }
  }

  function updateStatus() {
  const map = JSON.parse(localStorage.getItem('ptc_clickmap') || '{}');
  const total = Object.values(map).reduce((a, b) => a + b, 0);
  const points = parseInt(localStorage.getItem('ptc_points') || '0');
  const user = localStorage.getItem('ptc_user') || '-';
  const nextReset = new Date(parseInt(localStorage.getItem('ptc_lastreset') || '0') + RESET_TIME);

  document.getElementById('statusBar').innerHTML = `
    <div class="status-card">
      <div class="status-row"><span>Nama Saya:</span><span>${user}</span></div>
      <div class="status-row"><span>Total Klik Hari ini:</span><span>${total}</span></div>
      <div class="status-row"><span>Poin Saya:</span><span>${points}</span></div>
      <div class="status-row"><span>Waktu Akhir Kerja:</span><span>${nextReset.toLocaleString()}</span></div>
    </div>
  `;
}

  function updatePoints() {
    const points = parseInt(localStorage.getItem('ptc_points') || '0');
    localStorage.setItem('ptc_points', points + POINTS_PER_CLICK);
  }

function renderDashboard() {
  resetClicksIfNeeded();
  const name = localStorage.getItem('ptc_user');
  const points = localStorage.getItem('ptc_points');
  document.getElementById('displayName').textContent = name;
  document.getElementById('userInfo').textContent = `Level: ${name === 'User' ? 'User' : 'Admin'} | Poin: ${points}`;

  const map = JSON.parse(localStorage.getItem('ptc_clickmap') || '{}');
  const container = document.getElementById('adsContainer');
  container.innerHTML = '';

  if (name === 'User') {
    USERS.filter(u => u.name === 'Ahmad Ismail Al Malik').forEach(u => {
      const clicks = map[u.name] || 0;

      const box = document.createElement('div');
      box.className = 'ad-box';
      box.innerHTML = `<strong>${u.name}</strong>`;

      const btn = document.createElement('button');
      btn.className = 'btn';
      btn.textContent = clicks >= MAX_PER_AD ? 'Klik Selesai' : 'Tonton Iklan';
      btn.disabled = clicks >= MAX_PER_AD;
      btn.onclick = () => handleClick(u.adUrl, u.name, btn);

      const info = document.createElement('div');
      info.className = 'info';
      info.textContent = `Klik: ${clicks}/${MAX_PER_AD}`;

      box.appendChild(btn);
      box.appendChild(info);
      container.appendChild(box);
    });
  } else {
    USERS.filter(u => u.name !== name).forEach(u => {
      const clicks = map[u.name] || 0;

      const box = document.createElement('div');
      box.className = 'ad-box';
      box.innerHTML = `<strong>${u.name}</strong>`;

      const btn = document.createElement('button');
      btn.className = 'btn';
      btn.textContent = clicks >= MAX_PER_AD ? 'Klik Selesai' : 'Tonton Iklan';
      btn.disabled = clicks >= MAX_PER_AD;
      btn.onclick = () => handleClick(u.adUrl, u.name, btn);

      const info = document.createElement('div');
      info.className = 'info';
      info.textContent = `Klik: ${clicks}/${MAX_PER_AD}`;

      box.appendChild(btn);
      box.appendChild(info);
      container.appendChild(box);
    });
  }

  // Sembunyikan tombol withdraw untuk admin
  const withdrawBtn = document.getElementById('withdrawContainer');
  if (withdrawBtn) {
    withdrawBtn.style.display = name === 'User' ? 'block' : 'none';
  }

  updateStatus();
}

function handleWithdraw() {
    const points = parseInt(localStorage.getItem('ptc_points') || '0');
    const faucetpayEmail = document.getElementById('faucetpayEmail').value.trim();

    // Validasi email dan jumlah poin
    if (!faucetpayEmail) {
        alert('Email FaucetPay harus diisi.');
        return;
    }

    if (points >= 10) {
        const dogecoinAmount = (points / 10) * 0.00000001;
        alert(`Penarikan Anda sedang diproses. Anda akan menerima ${dogecoinAmount} Dogecoin.`);
        
        sendDogecoinToFaucetPay(faucetpayEmail, dogecoinAmount, points);
        
      localStorage.setItem('ptc_points', '0');
        renderDashboard();
    } else {
        alert('Poin Anda tidak cukup untuk melakukan penarikan.');
    }
}

function sendDogecoinToFaucetPay(faucetpayEmail, points) {
  const apiKey = "80b67838d4c0fb5f9be8c40cc7b8f99240fb1f3491ac7a2df3a794ae7e970189";
  const rawAmount = points * 0.00000001;
  const amount = Math.max(rawAmount, 1).toFixed(8); 
  
  const formData = new URLSearchParams();
  formData.append("api_key", apiKey);
  formData.append("amount", amount);
  formData.append("currency", "DOGE");
  formData.append("to", faucetpayEmail);

  fetch("https://faucetpay.io/api/v1/send", {
    method: "POST",
    headers: {
      "Content-Type": "application/x-www-form-urlencoded"
    },
    body: formData
  })
    .then(res => res.json())
    .then(data => {
      console.log("Response FaucetPay:", data);
      if (data.status === 200) {
        alert(`Sukses: ${data.message}`);
      } else {
        alert(`Gagal: ${data.message || 'Permintaan gagal.'}`);
      }
    })
    .catch(error => {
      console.error("Error:", error);
      alert("Kesalahan koneksi.");
    });
}

function showWithdrawForm() {
    const withdrawForm = document.getElementById('withdrawForm');
    withdrawForm.style.display = 'block';
}

  function startCountdown(button, seconds) {
    let remaining = seconds;
    button.disabled = true;
    const interval = setInterval(() => {
      button.textContent = `Tunggu ${remaining--} detik...`;
      if (remaining < 0) {
        clearInterval(interval);
        button.disabled = false;
        button.textContent = 'Tonton Iklan';
      }
    }, 1000);
  }

  function handleClick(url, owner, button) {
    const map = JSON.parse(localStorage.getItem('ptc_clickmap') || '{}');
    const lastClick = parseInt(localStorage.getItem('ptc_lastclick') || '0');
    const now = Date.now();
    
    if ((map[owner] || 0) >= MAX_PER_AD) return alert('Batas klik iklan ini tercapai.');

    if (now - lastClick < CLICK_INTERVAL) {
      const wait = Math.ceil((CLICK_INTERVAL - (now - lastClick)) / 1000);
      startCountdown(button, wait);
      return;
    }

    document.getElementById('loading').style.display = 'block';
    button.disabled = true;

    setTimeout(() => {
      window.open(url, '_blank');
      map[owner] = (map[owner] || 0) + 1;
      localStorage.setItem('ptc_clickmap', JSON.stringify(map));
      localStorage.setItem('ptc_lastclick', now);
      updatePoints();
      document.getElementById('loading').style.display = 'none';
      renderDashboard();
    }, 1000);
  }

  window.onload = () => {
    if (localStorage.getItem('ptc_user')) {
      document.getElementById('loginPopup').style.display = 'none';
      renderDashboard();
    }
  };
</script>
</body>
</html>
